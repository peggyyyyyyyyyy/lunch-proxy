<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>åˆé¤éš¨æ©Ÿæœ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-5">
    <div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6">
        <h1 class="text-2xl font-bold mb-4">ğŸ“ é™„è¿‘ 500m é¤å»³</h1>
        <div id="status" class="text-blue-500 mb-4">æ­£åœ¨å–å¾—ä½ç½®...</div>
        <ul id="restaurant-list" class="space-y-2"></ul>
    </div>

    <script>
        const statusEl = document.getElementById('status');
        const listEl = document.getElementById('restaurant-list');

        // Zeabur çµ¦ä½ çš„ç¶²å€ (æœ€å¾Œé¢ä¸è¦åŠ æ–œç·š)
        const ZEABUR_URL = "https://lunch-go.zeabur.app"; 

        window.onload = () => {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const { latitude, longitude } = pos.coords;
                statusEl.innerText = `ğŸ” æ­£åœ¨é€é Zeabur æœå°‹...`;

                try {
                    // å‘¼å«ä½ çš„ Zeabur å¾Œç«¯
                    const response = await fetch(`${ZEABUR_URL}/api/restaurants?lat=${latitude}&lng=${longitude}`);
                    const data = await response.json();

                    if (data.status === "OK") {
                        statusEl.innerText = `âœ… æ‰¾åˆ° ${data.results.length} é–“é¤å»³`;
                        listEl.innerHTML = data.results.map(place => `
                            <li class="border-b py-2">
                                <div class="font-bold">${place.name}</div>
                                <div class="text-sm text-gray-500">â­ ${place.rating || 'ç„¡'} | ${place.vicinity}</div>
                            </li>
                        `).join('');
                    } else {
                        statusEl.innerText = `âŒ API éŒ¯èª¤: ${data.status}`;
                    }
                } catch (err) {
                    statusEl.innerText = `âŒ ç„¡æ³•é€£ç·šè‡³å¾Œç«¯ä¼ºæœå™¨`;
                }
            }, () => {
                statusEl.innerText = "âŒ è«‹é–‹å•Ÿå®šä½æ¬Šé™";
            });
        };
    </script>
</body>
</html>